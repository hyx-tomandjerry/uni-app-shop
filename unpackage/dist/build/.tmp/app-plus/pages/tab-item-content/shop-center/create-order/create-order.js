(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tab-item-content/shop-center/create-order/create-order"],{"0178":function(e,t,n){"use strict";var a=n("edff"),i=n.n(a);i.a},"036f":function(e,t,n){"use strict";n.r(t);var a=n("f8cc"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=i.a},"4cba":function(e,t,n){"use strict";n.r(t);var a=n("62e2"),i=n("036f");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("0178");var s=n("2877"),r=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},"62e2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},edff:function(e,t,n){},f8cc:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(n("df5e"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){return n.e("components/uni/mx-datepicker/mx-datepicker").then(n.bind(null,"51fd"))},o={data:function(){return{showPicker:!1,isShow:!1,modalName:null,value:"",CustomBar:this.CustomBar,shop:{id:"",name:""},amapPlugin:null,key:"4c523fb1857f99ba7f2d683d9e88ec1e",shopList:[],designer:{name:"",telephone:"",date:""},repairObj:{bigName:"",bigID:"",subName:"",subID:"",summary:""},type:"rangetime",files:[],imgList:[],address:"",token:""}},components:{MxDatePicker:i},getOpenDate:function(){var e=new Date;return this.format(e,"YMD")},onLoad:function(){var t=this;this.getUploadToken(),this.$fire.on("shop",function(e){t.shop.id=e.id,t.shop.name=e.name}),this.$fire.on("repair",function(e){t.repairObj={bigID:e.bigID,bigName:e.bigName,subID:e.subID,subName:e.subName}}),e.getStorage({key:"userInfo",success:function(e){t.designer.name=e.data.name,t.designer.telephone=e.data.account}})},methods:{createOrder:function(){var t=this;this.repairObj.bigID?this.repairObj.summary?e.getStorage({key:"userInfo",success:function(n){t.$ajax("NewServiceOrder",{catalog:t.repairObj.subID?t.repairObj.subID:t.repairObj.bigID,creator:n.data.id,shop:t.shop.id,appointdate:t.designer.date?t.designer.date:t.getOpenDate,summary:t.repairObj.summary,files:t.files?t.files.join(","):"",contractor:t.designer.name?t.designer.name:n.data.name,telephone:t.designer.telephone?t.designer.telephone:n.data.account},function(t){e.showToast({title:"新增报修成功",icon:"success"}),setTimeout(function(){e.navigateBack({delta:1})},500)})}}):e.showToast({title:"请输入报修描述",icon:"none"}):e.showToast({title:"请选择报修类别",icon:"none"})},toRepairItem:function(){e.navigateTo({url:"../repair-item/repair-item"})},getUploadToken:function(){var t=this;e.request({url:this.$store.state.url+"UploadToken",success:function(e){t.token=e.data.data}})},ChooseImageEvent:function(){var t=this;e.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album"],success:function(n){var a=n.tempFilePaths;0!=t.imgList.length?t.imgList=t.imgList.concat(n.tempFilePaths):t.imgList=n.tempFilePaths;for(var i=0;i<n.tempFilePaths.length;i++){var o=e.uploadFile({url:t.$store.state.uploadHostUrl+t.token,filePath:a[i],name:"file",formData:{"x:type":18,"x:owner":18,"x:creator":49},success:function(e){var n=JSON.parse(e.data);t.files.push(n.data)}});o.onProgressUpdate(function(t){100==t.progress&&e.showToast({title:"上传成功",icon:"none"})},function(t){e.showToast({title:"上传失败",icon:"none"})})}}})},DelImg:function(t){e.previewImage({urls:this.imgList,current:t})},ViewImage:function(t){var n=this;e.showModal({content:"确定删除？",cancelText:"取消",confirmText:"确定",success:function(a){a.confirm&&(n.imgList.splice(t,1),n.$ajax("RemoveFiles",{id:n.files[t]},function(a){n.files.splice(t,1),e.showToast({title:"删除成功",icon:"none"})}))}})},onSelected:function(e){this.showPicker=!1,e&&(this[this.type]=e.value,this.designer.date=e.value.replace(/\//g,"-"),console.log(this.designer.date," at pages\\tab-item-content\\shop-center\\create-order\\create-order.vue:346"))},onShowDatePicker:function(e){this.type=e,this.showPicker=!0,this.value=this[e]},toNearShopList:function(){e.navigateTo({url:"../near-shop-list/near-shop-list"})},showModal:function(e){console.log(e," at pages\\tab-item-content\\shop-center\\create-order\\create-order.vue:385"),this.modalName=e.currentTarget.dataset.target},hideModal:function(){this.modalName=""},checkTelEvent:function(t){if(!/^1[3|5|7|8][0-9]\d{4,8}$/.test(t))return e.showToast({title:"手机号码不存在",icon:"none"}),!1}}};t.default=o}).call(this,n("6e42")["default"])}},[["56aa","common/runtime","common/vendor"]]]);